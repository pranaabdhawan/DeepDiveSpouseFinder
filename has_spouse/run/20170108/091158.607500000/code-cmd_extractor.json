{
  "path": "process/init/app/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/init/app\n# {\"style\":\"cmd_extractor\",\"cmd\":\"\\n        deepdive db init\\n\\n        cd \\\"$DEEPDIVE_APP\\\"\\n        # run legacy schema.sql\\n        if [[ -r schema.sql ]]; then\\n            deepdive db prompt <schema.sql\\n        fi\\n        # run legacy init script\\n        if [[ -x input/init.sh ]]; then\\n            input/init.sh\\n        fi\\n        \",\"name\":\"process/init/app\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/init/app'\n\n        deepdive db init\n\n        cd \"$DEEPDIVE_APP\"\n        # run legacy schema.sql\n        if [[ -r schema.sql ]]; then\n            deepdive db prompt <schema.sql\n        fi\n        # run legacy init script\n        if [[ -x input/init.sh ]]; then\n            input/init.sh\n        fi\n        \n\n\n"
}
{
  "path": "process/init/relation/articles/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/init/relation/articles\n# {\"style\":\"cmd_extractor\",\"cmd\":\"deepdive create table 'articles' && deepdive load 'articles'\",\"dependencies_\":[\"process/init/app\"],\"output_relation\":\"articles\",\"output_\":\"data/articles\",\"name\":\"process/init/relation/articles\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/init/relation/articles'\ndeepdive create table 'articles' && deepdive load 'articles'\n\n\n"
}
{
  "path": "process/init/relation/sentences/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/init/relation/sentences\n# {\"style\":\"cmd_extractor\",\"cmd\":\"deepdive create table 'sentences' && deepdive load 'sentences'\",\"dependencies_\":[\"process/init/app\"],\"output_relation\":\"sentences\",\"output_\":\"data/sentences\",\"name\":\"process/init/relation/sentences\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/init/relation/sentences'\ndeepdive create table 'sentences' && deepdive load 'sentences'\n\n\n"
}
{
  "path": "process/ext_has_spouse/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/ext_has_spouse\n# {\"cmd\":\"\\n\\n\\tdeepdive create view has_spouse as 'SELECT DISTINCT R0.column_0, R0.column_1, 0 AS id, \\nCASE WHEN R0.column_2 > 0 THEN true\\n     WHEN R0.column_2 < 0 THEN false\\n     ELSE NULL\\nEND AS label\\n          FROM spouse_label_resolved R0\\n        \\n          \\nUNION ALL\\nSELECT DISTINCT R0.p1_id, R0.p2_id, 0 AS id, NULL AS label\\n          FROM spouse_candidate R0\\n        \\n          '\\n\\t\\n        \",\"dependencies\":[\"ext_spouse_label_resolved\",\"ext_spouse_candidate\"],\"input_relations\":[\"spouse_label_resolved\",\"spouse_candidate\"],\"output_relation\":\"has_spouse\",\"style\":\"cmd_extractor\",\"dependencies_\":[\"process/ext_spouse_label_resolved\",\"process/ext_spouse_candidate\"],\"input_\":[\"data/spouse_label_resolved\",\"data/spouse_candidate\"],\"output_\":\"data/has_spouse\",\"name\":\"process/ext_has_spouse\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/ext_has_spouse'\n\n\n\tdeepdive create view has_spouse as 'SELECT DISTINCT R0.column_0, R0.column_1, 0 AS id, \nCASE WHEN R0.column_2 > 0 THEN true\n     WHEN R0.column_2 < 0 THEN false\n     ELSE NULL\nEND AS label\n          FROM spouse_label_resolved R0\n        \n          \nUNION ALL\nSELECT DISTINCT R0.p1_id, R0.p2_id, 0 AS id, NULL AS label\n          FROM spouse_candidate R0\n        \n          '\n\t\n        \n\n\n"
}
{
  "path": "process/ext_num_people/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/ext_num_people\n# {\"cmd\":\"\\n\\n\\tdeepdive create view num_people as 'SELECT R0.doc_id AS column_0, R0.sentence_index AS column_1, COUNT(R0.mention_id) AS column_2\\nFROM person_mention R0\\n        \\n        GROUP BY R0.doc_id, R0.sentence_index'\\n\\t\\n        \",\"dependencies\":[\"ext_person_mention_by_map_person_mention\"],\"input_relations\":[\"person_mention\"],\"output_relation\":\"num_people\",\"style\":\"cmd_extractor\",\"dependencies_\":[\"process/ext_person_mention_by_map_person_mention\"],\"input_\":[\"data/person_mention\"],\"output_\":\"data/num_people\",\"name\":\"process/ext_num_people\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/ext_num_people'\n\n\n\tdeepdive create view num_people as 'SELECT R0.doc_id AS column_0, R0.sentence_index AS column_1, COUNT(R0.mention_id) AS column_2\nFROM person_mention R0\n        \n        GROUP BY R0.doc_id, R0.sentence_index'\n\t\n        \n\n\n"
}
{
  "path": "process/ext_spouse_candidate/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/ext_spouse_candidate\n# {\"cmd\":\"\\n\\n\\t# TODO use temporary table\\n\\tdeepdive create table \\\"spouse_candidate\\\"\\n\\tdeepdive sql 'INSERT INTO spouse_candidate SELECT R1.mention_id AS \\\"person_mention.R1.mention_id\\\", R1.mention_text AS \\\"person_mention.R1.mention_text\\\", R2.mention_id AS \\\"person_mention.R2.mention_id\\\", R2.mention_text AS \\\"person_mention.R2.mention_text\\\"\\nFROM num_people R0, person_mention R1, person_mention R2\\n        WHERE R1.doc_id = R0.column_0  AND R1.sentence_index = R0.column_1  AND R2.doc_id = R0.column_0  AND R2.sentence_index = R0.column_1  AND R0.column_2 < 5 AND R1.mention_text != R2.mention_text AND R1.begin_index != R2.begin_index'\\n\\t# TODO rename temporary table to replace output_relation\\n\\t\\n        \",\"dependencies\":[\"ext_num_people\",\"ext_person_mention_by_map_person_mention\"],\"input_relations\":[\"num_people\",\"person_mention\"],\"output_relation\":\"spouse_candidate\",\"style\":\"cmd_extractor\",\"dependencies_\":[\"process/ext_num_people\",\"process/ext_person_mention_by_map_person_mention\"],\"input_\":[\"data/num_people\",\"data/person_mention\"],\"output_\":\"data/spouse_candidate\",\"name\":\"process/ext_spouse_candidate\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/ext_spouse_candidate'\n\n\n\t# TODO use temporary table\n\tdeepdive create table \"spouse_candidate\"\n\tdeepdive sql 'INSERT INTO spouse_candidate SELECT R1.mention_id AS \"person_mention.R1.mention_id\", R1.mention_text AS \"person_mention.R1.mention_text\", R2.mention_id AS \"person_mention.R2.mention_id\", R2.mention_text AS \"person_mention.R2.mention_text\"\nFROM num_people R0, person_mention R1, person_mention R2\n        WHERE R1.doc_id = R0.column_0  AND R1.sentence_index = R0.column_1  AND R2.doc_id = R0.column_0  AND R2.sentence_index = R0.column_1  AND R0.column_2 < 5 AND R1.mention_text != R2.mention_text AND R1.begin_index != R2.begin_index'\n\t# TODO rename temporary table to replace output_relation\n\t\n        \n\n\n"
}
{
  "path": "process/ext_spouse_label_resolved/run.sh",
  "mode": "+x",
  "content": "#!/usr/bin/env bash\n# cmd_extractor  process/ext_spouse_label_resolved\n# {\"cmd\":\"\\n\\n\\tdeepdive create view spouse_label_resolved as 'SELECT R0.p1_id AS column_0, R0.p2_id AS column_1, SUM(R0.label) AS column_2\\nFROM spouse_label R0\\n        \\n        GROUP BY R0.p1_id, R0.p2_id'\\n\\t\\n        \",\"dependencies\":[\"ext_spouse_label_by_supervise\"],\"input_relations\":[\"spouse_label\"],\"output_relation\":\"spouse_label_resolved\",\"style\":\"cmd_extractor\",\"dependencies_\":[\"process/ext_spouse_label_by_supervise\"],\"input_\":[\"data/spouse_label\"],\"output_\":\"data/spouse_label_resolved\",\"name\":\"process/ext_spouse_label_resolved\"}\nset -xeuo pipefail\ncd \"$(dirname \"$0\")\"\n\n\n\nexport DEEPDIVE_CURRENT_PROCESS_NAME='process/ext_spouse_label_resolved'\n\n\n\tdeepdive create view spouse_label_resolved as 'SELECT R0.p1_id AS column_0, R0.p2_id AS column_1, SUM(R0.label) AS column_2\nFROM spouse_label R0\n        \n        GROUP BY R0.p1_id, R0.p2_id'\n\t\n        \n\n\n"
}
